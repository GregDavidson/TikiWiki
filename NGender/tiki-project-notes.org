* Tiki Project Notes

** Categorical Stewardship Project

Purpose: Leverage Default Groups with their Default
Categories to give users control over objects they create
and/or objects associated with their default category.

Currently the feature is invoked when
(1) the user has a default category and
(2) feature_categorical_stewardship == 'y'

Should we also require the user to be a member of Group Steward?

Possible conditions under which we should create default Groups and Categories
- the user is a member of Group Steward
- feature_categorical_stewardship == 'y'
- some other feature

Additional questions:
- Should we create Group Steward if it doesn't exist?
- Should we have a settable format for Default Group Names?
- Should we have a settable format and/or parent for Default Categories?
- Should different users have a different parent for their Default Categories?
- Should it be OK for a Steward to delete their Default
  Category from an object which they created?

For maximum simplicity, when feature_categorical_stewardship == 'y'
- Ensure Group Steward exists
- Ensure Category User exists
- When a user is created with Group Steward
-- Create their Default Group as user_TheirUserName
-- Create their Default Category as user::TheirUserName
-- Ensure their Default Category has suitable permissions
--- Avoid permission of being able to add other objects to it!!
--- Never allow that permission for a Default Category?

*** [DONE] First Project: Setup Users with Default Groups with Default Categories

Did it with sql!

Extra credit: Create it as an admin check box.

*** Second Project: Fix Tiki Categories so that
(1) [DONE] Any object created newly by a user is associated with that users' Default Category, if any.
(2) A user can do anything they like with an object associated with their Default Category, including
(2b) [TODO] Edit the categories associated with their object
(2a) [DONE] In editing, See all possible categories (--> but consider having a list of "hidden" categories)

*** owner vs. creator vs. user

TABLE tiki_user_tasks
- user varchar(200) NOT NULL DEFAULT '',              -- task user
- creator varchar(200) NOT NULL,                     -- username of creator

*** SELECT LIKE owner

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME = 'owner'
#+END_SRC

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME like '%owner%'
#+END_SRC

| table_name | column_name  | DATA_TYPE |
|------------+--------------+-----------|
| tiki_blogs | always_owner | char      |

*** SELECT LIKE creator

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME = 'creator'
#+END_SRC

| table_name      | column_name | DATA_TYPE |
|-----------------+-------------+-----------|
| tiki_pages      | creator     | varchar   |
| tiki_user_tasks | creator     | varchar   |

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME like '%creator%'
#+END_SRC

| table_name              | column_name       | DATA_TYPE |
|-------------------------+-------------------+-----------|
| tiki_article_types      | creator_edit      | varchar   |
| tiki_file_galleries     | show_creator      | char      |
| tiki_pages              | creator           | varchar   |
| tiki_user_tasks         | creator           | varchar   |
| tiki_user_tasks         | rights_by_creator | char      |
| tiki_user_tasks_history | accepted_creator  | char      |

*** SELECT LIKE user

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME = 'userid'
#+END_SRC

| table_name              | column_name | DATA_TYPE |
|-------------------------+-------------+-----------|
| tiki_credits            | userId      | int       |
| tiki_credits_usage      | userId      | int       |
| tiki_download           | userId      | int       |
| tiki_language           | userId      | int       |
| tiki_payment_received   | userId      | int       |
| tiki_payment_requests   | userId      | int       |
| tiki_search_queries     | userId      | int       |
| tiki_user_login_cookies | userId      | int       |
| tiki_user_monitors      | userId      | int       |
| users_usergroups        | userId      | int       |
| users_users             | userId      | int       |

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME LIKE '%user%id%'
#+END_SRC

| table_name                 | column_name                | DATA_TYPE |
|----------------------------+----------------------------+-----------|
| index_582a38baa4237        | tracker_field_user_skypeid | text      |
| tiki_acct_account          | accountUserId              | int       |
| tiki_credits               | userId                     | int       |
| tiki_credits_usage         | userId                     | int       |
| tiki_download              | userId                     | int       |
| tiki_language              | userId                     | int       |
| tiki_live_support_requests | user_id                    | varchar   |
| tiki_payment_received      | userId                     | int       |
| tiki_payment_requests      | userId                     | int       |
| tiki_search_queries        | userId                     | int       |
| tiki_user_answers          | userResultId               | int       |
| tiki_user_answers_uploads  | userResultId               | int       |
| tiki_user_login_cookies    | userId                     | int       |
| tiki_user_monitors         | userId                     | int       |
| tiki_user_quizzes          | userResultId               | int       |
| users_groups               | usersTrackerId             | int       |
| users_groups               | usersFieldId               | int       |
| users_groups               | registrationUsersFieldIds  | text      |
| users_usergroups           | userId                     | int       |
| users_users                | userId                     | int       |

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME = 'user'
#+END_SRC

| table_name                    | column_name | DATA_TYPE |
|-------------------------------+-------------+-----------|
| messu_archive                 | user        | varchar   |
| messu_messages                | user        | varchar   |
| messu_sent                    | user        | varchar   |
| tiki_actionlog                | user        | varchar   |
| tiki_banning                  | user        | varchar   |
| tiki_blogs                    | user        | varchar   |
| tiki_blog_posts               | user        | varchar   |
| tiki_calendars                | user        | varchar   |
| tiki_calendar_items           | user        | varchar   |
| tiki_calendar_recurrence      | user        | varchar   |
| tiki_files                    | user        | varchar   |
| tiki_file_drafts              | user        | varchar   |
| tiki_file_galleries           | user        | varchar   |
| tiki_forums_queue             | user        | varchar   |
| tiki_forums_reported          | user        | varchar   |
| tiki_forum_reads              | user        | varchar   |
| tiki_freetagged_objects       | user        | varchar   |
| tiki_galleries                | user        | varchar   |
| tiki_goal_events              | user        | varchar   |
| tiki_history                  | user        | varchar   |
| tiki_images                   | user        | varchar   |
| tiki_live_support_messages    | user        | varchar   |
| tiki_live_support_operators   | user        | varchar   |
| tiki_live_support_requests    | user        | varchar   |
| tiki_mailin_accounts          | user        | varchar   |
| tiki_minical_events           | user        | varchar   |
| tiki_minical_topics           | user        | varchar   |
| tiki_minichat                 | user        | varchar   |
| tiki_pages                    | user        | varchar   |
| tiki_page_footnotes           | user        | varchar   |
| tiki_semaphores               | user        | varchar   |
| tiki_sessions                 | user        | varchar   |
| tiki_sheet_values             | user        | varchar   |
| tiki_shoutbox                 | user        | varchar   |
| tiki_suggested_faq_questions  | user        | varchar   |
| tiki_tags                     | user        | varchar   |
| tiki_tracker_item_attachments | user        | varchar   |
| tiki_url_shortener            | user        | varchar   |
| tiki_userfiles                | user        | varchar   |
| tiki_userpoints               | user        | varchar   |
| tiki_user_assigned_modules    | user        | varchar   |
| tiki_user_bookmarks_folders   | user        | varchar   |
| tiki_user_bookmarks_urls      | user        | varchar   |
| tiki_user_mail_accounts       | user        | varchar   |
| tiki_user_menus               | user        | varchar   |
| tiki_user_notes               | user        | varchar   |
| tiki_user_postings            | user        | varchar   |
| tiki_user_preferences         | user        | varchar   |
| tiki_user_quizzes             | user        | varchar   |
| tiki_user_reports             | user        | varchar   |
| tiki_user_reports_cache       | user        | varchar   |
| tiki_user_taken_quizzes       | user        | varchar   |
| tiki_user_tasks               | user        | varchar   |
| tiki_user_votings             | user        | varchar   |
| tiki_user_watches             | user        | varchar   |
| tiki_webmail_contacts         | user        | varchar   |
| tiki_webmail_contacts_fields  | user        | varchar   |
| tiki_webmail_messages         | user        | varchar   |
| tiki_wiki_attachments         | user        | varchar   |

#+BEGIN_SRC sql
SELECT table_name,column_name,DATA_TYPE FROM `COLUMNS` WHERE
TABLE_SCHEMA='tiki' and COLUMN_NAME LIKE '%user%' and
table_name not like 'index%' order by table_name,
column_name
#+END_SRC

| table_name                    | column_name               | DATA_TYPE |
|-------------------------------+---------------------------+-----------|
| messu_archive                 | user                      | varchar   |
| messu_archive                 | user_bcc                  | text      |
| messu_archive                 | user_cc                   | text      |
| messu_archive                 | user_from                 | varchar   |
| messu_archive                 | user_to                   | text      |
| messu_messages                | user                      | varchar   |
| messu_messages                | user_bcc                  | text      |
| messu_messages                | user_cc                   | text      |
| messu_messages                | user_from                 | varchar   |
| messu_messages                | user_to                   | text      |
| messu_sent                    | user                      | varchar   |
| messu_sent                    | user_bcc                  | text      |
| messu_sent                    | user_cc                   | text      |
| messu_sent                    | user_from                 | varchar   |
| messu_sent                    | user_to                   | text      |
| tiki_acct_account             | accountUserId             | int       |
| tiki_actionlog                | user                      | varchar   |
| tiki_auth_tokens              | createUser                | char      |
| tiki_auth_tokens              | userPrefix                | varchar   |
| tiki_banners                  | maxUserImpressions        | int       |
| tiki_banning                  | user                      | varchar   |
| tiki_blogs                    | user                      | varchar   |
| tiki_blog_posts               | user                      | varchar   |
| tiki_calendars                | user                      | varchar   |
| tiki_calendar_items           | user                      | varchar   |
| tiki_calendar_recurrence      | user                      | varchar   |
| tiki_calendar_roles           | username                  | varchar   |
| tiki_chat_channels            | max_users                 | int       |
| tiki_comments                 | userName                  | varchar   |
| tiki_comments                 | user_ip                   | varchar   |
| tiki_copyrights               | userName                  | varchar   |
| tiki_credits                  | userId                    | int       |
| tiki_credits_usage            | userId                    | int       |
| tiki_download                 | userId                    | int       |
| tiki_files                    | lastModifUser             | varchar   |
| tiki_files                    | user                      | varchar   |
| tiki_file_drafts              | user                      | varchar   |
| tiki_file_galleries           | show_last_user            | char      |
| tiki_file_galleries           | user                      | varchar   |
| tiki_forums                   | inbound_pop_user          | varchar   |
| tiki_forums_queue             | user                      | varchar   |
| tiki_forums_reported          | user                      | varchar   |
| tiki_forum_reads              | user                      | varchar   |
| tiki_freetagged_objects       | user                      | varchar   |
| tiki_galleries                | showuser                  | char      |
| tiki_galleries                | user                      | varchar   |
| tiki_goal_events              | user                      | varchar   |
| tiki_groupalert               | displayEachuser           | char      |
| tiki_history                  | user                      | varchar   |
| tiki_images                   | user                      | varchar   |
| tiki_invited                  | used_on_user              | varchar   |
| tiki_language                 | userId                    | int       |
| tiki_live_support_messages    | user                      | varchar   |
| tiki_live_support_messages    | username                  | varchar   |
| tiki_live_support_operators   | user                      | varchar   |
| tiki_live_support_requests    | tiki_user                 | varchar   |
| tiki_live_support_requests    | user                      | varchar   |
| tiki_live_support_requests    | user_id                   | varchar   |
| tiki_logs                     | loguser                   | varchar   |
| tiki_mailin_accounts          | user                      | varchar   |
| tiki_mailin_accounts          | username                  | varchar   |
| tiki_menu_options             | userlevel                 | int       |
| tiki_minical_events           | user                      | varchar   |
| tiki_minical_topics           | user                      | varchar   |
| tiki_minichat                 | user                      | varchar   |
| tiki_newsletters              | allowUserSub              | char      |
| tiki_newsletters              | users                     | int       |
| tiki_newsletter_subscriptions | isUser                    | char      |
| tiki_object_scores            | triggerUser               | varchar   |
| tiki_pages                    | user                      | varchar   |
| tiki_page_footnotes           | user                      | varchar   |
| tiki_payment_received         | userId                    | int       |
| tiki_payment_requests         | userId                    | int       |
| tiki_received_articles        | receivedFromUser          | varchar   |
| tiki_received_pages           | receivedFromUser          | varchar   |
| tiki_search_queries           | userId                    | int       |
| tiki_semaphores               | user                      | varchar   |
| tiki_sent_newsletters         | users                     | int       |
| tiki_sessions                 | user                      | varchar   |
| tiki_sheet_values             | user                      | varchar   |
| tiki_shoutbox                 | user                      | varchar   |
| tiki_suggested_faq_questions  | user                      | varchar   |
| tiki_tags                     | user                      | varchar   |
| tiki_tracker_item_attachments | user                      | varchar   |
| tiki_url_shortener            | user                      | varchar   |
| tiki_userfiles                | user                      | varchar   |
| tiki_userpoints               | user                      | varchar   |
| tiki_user_answers             | userResultId              | int       |
| tiki_user_answers_uploads     | userResultId              | int       |
| tiki_user_assigned_modules    | user                      | varchar   |
| tiki_user_bookmarks_folders   | user                      | varchar   |
| tiki_user_bookmarks_urls      | user                      | varchar   |
| tiki_user_login_cookies       | userId                    | int       |
| tiki_user_mailin_struct       | username                  | varchar   |
| tiki_user_mail_accounts       | user                      | varchar   |
| tiki_user_mail_accounts       | username                  | varchar   |
| tiki_user_menus               | user                      | varchar   |
| tiki_user_monitors            | userId                    | int       |
| tiki_user_notes               | user                      | varchar   |
| tiki_user_postings            | user                      | varchar   |
| tiki_user_preferences         | user                      | varchar   |
| tiki_user_quizzes             | user                      | varchar   |
| tiki_user_quizzes             | userResultId              | int       |
| tiki_user_reports             | user                      | varchar   |
| tiki_user_reports_cache       | user                      | varchar   |
| tiki_user_taken_quizzes       | user                      | varchar   |
| tiki_user_tasks               | user                      | varchar   |
| tiki_user_tasks_history       | accepted_user             | char      |
| tiki_user_votings             | user                      | varchar   |
| tiki_user_watches             | user                      | varchar   |
| tiki_webmail_contacts         | user                      | varchar   |
| tiki_webmail_contacts_fields  | user                      | varchar   |
| tiki_webmail_messages         | user                      | varchar   |
| tiki_wiki_attachments         | user                      | varchar   |
| users_groups                  | registrationUsersFieldIds | text      |
| users_groups                  | userChoice                | char      |
| users_groups                  | usersFieldId              | int       |
| users_groups                  | usersTrackerId            | int       |
| users_usergroups              | userId                    | int       |
| users_users                   | userId                    | int       |

| tiki_calendar_categories           |
| tiki_categories                    |
| tiki_categorized_objects           |
| tiki_category_objects              |
| tiki_category_sites                |
| tiki_directory_categories          |
| tiki_related_categories            |
| tiki_theme_control_categs          |
*** Things about creator and user
In tikilib.php, there is function create_page($name, $hits, $data,
$lastModif, $comment, $user = 'admin', $ip = '0.0.0.0', $description =
'', $lang='', $is_html = false, $hash=null, $wysiwyg=NULL,
$wiki_authors_style='', $minor=0, $created='')

In there we set user and creator to the loggin user.

** Features 

in feature.php look at
- feature_dummy
- feature_ngender_ownership
- hmm, this code does not seem to be used anywhere
- is it obsoleted by table tiki_feature?

What's the code at the top of
- function prefs_feature list>

Do features get put in the database automatically?
- some are set in tiki.sql 

What database tables hold features-related information?
- tiki_preferences -- 87 like 'feature_%'
- tiki_feature -- empty!
- tiki_menu_options -- field section is getting set to features ?
- tiki_featured_links -- empty!
- tiki_sefurl_regex_out ?

SELECT count(*)  FROM tiki_feature;
+----------+
| count(*) |
+----------+
|        0 |
+----------+

SELECT count(*)  FROM tiki_preferences where name like 'feature_%';
+----------+
| count(*) |
+----------+
|       87 |
+----------+


Do features show up in 

** 

Page: https://localhost/tiki-index.php
Logged in as: ZRegister

Fatal error: Method Tiki_Render_Lazy::__toString() must not
throw an exception, caught ParseError: syntax error,
unexpected ''default'' (T_CONSTANT_ENCAPSED_STRING),
expecting ')' in /var/www/html/tiki/tiki-index.php on line 0

** database settings

*** convert Tiki's Tables from MyISAM to innodb
	 
In order to convert Tiki's Tables from MyISAM to innodb we must to either:
	 
#+BEGIN_SRC sql
update  tiki_preferences set value = 'n' where name = 'feature_search_fulltext';
insert into tiki_preferences (name, value) values ('feature_search_fulltext', 'n');
-- or even better as an upsert!!
#+END_SRC

This would work if name was a primary key which, yay, it is!
#+BEGIN_SRC sql
describe tiki_preferences; 
#+END_SRC
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| name  | varchar(255) | NO   | PRI |         |       |
| value | text         | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+

#+BEGIN_SRC sql
INSERT INTO tiki_preferences (name, value)
VALUES ('feature_categorical_stewardship', 'y')
ON DUPLICATE KEY
UPDATE value = 'y';
#+END_SRC

Upsert example online:
#+BEGIN_SRC sql
INSERT INTO `usage`
(`thing_id`, `times_used`, `first_time_used`)
VALUES
(4815162342, 1, NOW())
ON DUPLICATE KEY UPDATE
`times_used` = `times_used` + 1
#+END_SRC

See:
- [[file:Tiki/db/tiki_innodb.sql]]
- [[NGender/Tiki/db/tiki_convert_myisam_to_innodb.sql]]

** Procedure and Function Experiments 

*** User Default Group and Default Category

[[file:tiki-project.sql][tiki-project.sql]]
	 
*** Object In Category

Categories have Single-Inheritance

Rewrite these functions to just use loops!

#+BEGIN_SRC sql
DELIMITER //
CREATE DEFINER=`phpmyadmin`@`localhost` FUNCTION `cat_in_super`(cat_id int, super_id int) RETURNS int(11)
    READS SQL DATA
BEGIN
 DECLARE recur_id int;
 DECLARE found_cat_id int DEFAULT 0;
 DECLARE no_more int DEFAULT 0;
 DEClARE cat_cursor CURSOR FOR 
 SELECT parentId FROM tiki_categories WHERE categId = super_id;
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more = 1;
 OPEN cat_cursor;
 LOOP
  FETCH cat_cursor INTO found_cat_id;
  IF no_more = 1 THEN CLOSE cat_cursor; RETURN 0; END IF;
  IF found_cat_id = cat_id THEN CLOSE cat_cursor; RETURN cat_id; END IF;
  SET recur_id = obj_in_cat(cat_id, found_cat_id);
  IF recur_id <> 0 THEN CLOSE cat_cursor; RETURN recur_id; END IF;
 END LOOP;
END//
DELIMITER ;
#+END_SRC

#+BEGIN_SRC sql
DELIMITER //
CREATE DEFINER=`phpmyadmin`@`localhost` FUNCTION `obj_in_cat`(obj_id int, cat_id int) RETURNS int(11)
    READS SQL DATA
BEGIN
 DECLARE recur_id int;
 DECLARE found_cat_id int DEFAULT 0;
 DECLARE no_more int DEFAULT 0;
 DEClARE cat_cursor CURSOR FOR 
 SELECT parentId FROM tiki_categories WHERE categId = cat_id;
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more = 1;
 SELECT categId INTO found_cat_id 
 FROM tiki_category_objects WHERE categId = cat_id AND catObjectId = obj_id ;
 IF found_cat_id <> 0 THEN RETURN found_cat_id; END IF;
 OPEN cat_cursor;
 LOOP
  FETCH cat_cursor INTO found_cat_id;
  IF no_more = 1 THEN CLOSE cat_cursor; RETURN 0; END IF;
  SET recur_id = cat_in_super(cat_id, found_cat_id);
  IF recur_id <> 0 THEN CLOSE cat_cursor; RETURN recur_id; END IF;
 END LOOP;
END//
DELIMITER ;
#+END_SRC

*** User In Group and Group In Group

Groups have Multiple-Inheritance.

Rewrite these functions to use recursion to search the group hierarchies.

#+BEGIN_SRC sql
DELIMITER //
CREATE DEFINER=`phpmyadmin`@`localhost` FUNCTION `cat_in_super`(cat_id int, super_id int) RETURNS int(11)
    READS SQL DATA
BEGIN
 DECLARE recur_id int;
 DECLARE found_cat_id int DEFAULT 0;
 DECLARE no_more int DEFAULT 0;
 DEClARE cat_cursor CURSOR FOR 
 SELECT parentId FROM tiki_categories WHERE categId = super_id;
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more = 1;
 OPEN cat_cursor;
 LOOP
  FETCH cat_cursor INTO found_cat_id;
  IF no_more = 1 THEN CLOSE cat_cursor; RETURN 0; END IF;
  IF found_cat_id = cat_id THEN CLOSE cat_cursor; RETURN cat_id; END IF;
  SET recur_id = obj_in_cat(cat_id, found_cat_id);
  IF recur_id <> 0 THEN CLOSE cat_cursor; RETURN recur_id; END IF;
 END LOOP;
END//
DELIMITER ;
#+END_SRC

#+BEGIN_SRC sql
DELIMITER //
CREATE DEFINER=`phpmyadmin`@`localhost` FUNCTION `obj_in_cat`(obj_id int, cat_id int) RETURNS int(11)
    READS SQL DATA
BEGIN
 DECLARE recur_id int;
 DECLARE found_cat_id int DEFAULT 0;
 DECLARE no_more int DEFAULT 0;
 DEClARE cat_cursor CURSOR FOR 
 SELECT parentId FROM tiki_categories WHERE categId = cat_id;
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more = 1;
 SELECT categId INTO found_cat_id 
 FROM tiki_category_objects WHERE categId = cat_id AND catObjectId = obj_id ;
 IF found_cat_id <> 0 THEN RETURN found_cat_id; END IF;
 OPEN cat_cursor;
 LOOP
  FETCH cat_cursor INTO found_cat_id;
  IF no_more = 1 THEN CLOSE cat_cursor; RETURN 0; END IF;
  SET recur_id = cat_in_super(cat_id, found_cat_id);
  IF recur_id <> 0 THEN CLOSE cat_cursor; RETURN recur_id; END IF;
 END LOOP;
END//
DELIMITER ;
#+END_SRC

*** Possible Problems

I notice in TABLE users_users that
- userId int(8)

Is the 8 a count in bytes or bits?

Did I ever find a way to tell what all the permissions are?

How about just the ones that can be set using the GUI for a
group/category combination?

The group/category combination permissions live
in TABLE users_objectpermissions WHERE objectType='category'

Awkwardness:
- `objectId` varchar(32) NOT NULL default '',
is a hash:

#+BEGIN_SRC sql
SELECT DISTINCT
permName, groupName, category_path(group_default_category(name_to_group(groupName)))
FROM users_objectpermissions
WHERE objectType = 'category' AND groupName = 'User_Test_Observer' AND objectId =
MD5(CONCAT('category', group_default_category(name_to_group(groupName))));
#+END_SRC

Could change from using 'User' to using 'Steward' for
everybody!  This would solve the problem of making this
whole system more explicit.  However, with all of the
groupNames everywhere, conversion could be awkward.

Compare
- Joe --> User_Joe --> User::Joe
- Joe --> User_Joe --> Steward::Joe
- Joe --> User_Joe --> User:Steward::Joe
- Joe --> Steward_Joe --> Steward::Joe

Strategy: Create
- ZSteward --> User_Test_Steward --> User::Test::Steward
- ZNoDefaultGroup --> No Default Group
- ZNoDefaultCategory --> User_Test_NoDefaultCategory --> No Default Category
- ZNotSteward --> User_Test_NotSteward --> Foo::Bar or whatever

Use ZSteward as a model for all other Steward accounts 
- clone permissions from users_objectpermissions for new Stewards!

Use ZSteward, ZNoDefaultGroup, ZNoDefaultCategory, ZNotSteward in tests.

** DETERMINISTIC characteristic of NULL returning functions

It would be nicer if MYSQL didn't assume that DETERMINISTIC
functions which return NULL might not return a value later.

Do I know for certain that this is NOT true in PostgreSQL or MySQL?

It would be useful to raise this question with the
PostgreSQL developers - perhaps after checking what the SQL
standard might say on the matter!

